{
    "type": [
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        3,
        0,
        1,
        2,
        0,
        1,
        2,
        0,
        1,
        3,
        0,
        1,
        3,
        2,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        3,
        2,
        2,
        2,
        2,
        0,
        1,
        3,
        2,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        2,
        0,
        1,
        2,
        2,
        0,
        1,
        3,
        2,
        0,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        3,
        2,
        3,
        2,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        3,
        2,
        3,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        3,
        0,
        1,
        0,
        1,
        0,
        1,
        3,
        0,
        1,
        3,
        2
    ],
    "data": [
        "\n# Installing packages ------------------------------\n- Installing remotes ...                        OK [linked from cache]\n- Installing pacman ...                         OK [installed binary and cached in 0.94s]\n- Installing backports ...                      OK [installed binary and cached in 0.62s]\n- Installing cli ...                            OK [installed binary and cached in 1.1s]\n- Installing generics ...                       OK [installed binary and cached in 1.1s]\n- Installing glue ...        ",
        "                   OK [installed binary and cached in 0.92s]\n- Installing rlang ...                          OK [installed binary and cached in 0.82s]\n- Installing lifecycle ...                      OK [installed binary and cached in 0.95s]\n- Installing magrittr ...                       OK [installed binary and cached in 0.86s]\n- Installing utf8 ...                           OK [installed binary and cached in 0.7s]\n- Installing vctrs ...                          OK [installed binary and cached in 1.1s]\n- I",
        "nstalling pillar ...                         OK [installed binary and cached in 0.95s]\n- Installing R6 ...                             OK [installed binary and cached in 0.69s]\n- Installing pkgconfig ...                      OK [installed binary and cached in 0.63s]\n- Installing tibble ...                         OK [installed binary and cached in 1.2s]\n- Installing withr ...                          OK [installed binary and cached in 0.86s]\n- Installing tidyselect ...                     OK [installed bina",
        "ry and cached in 0.67s]\n- Installing dplyr ...                          OK [installed binary and cached in 1.4s]\n- Installing purrr ...                          OK [installed binary and cached in 0.91s]\n- Installing stringi ...                        OK [installed binary and cached in 1.5s]\n- Installing stringr ...                        OK [installed binary and cached in 1.0s]\n- Installing cpp11 ...                          OK [installed binary and cached in 1.1s]\n- Installing tidyr ...                    ",
        "      OK [installed binary and cached in 1.4s]\n- Installing broom ...                          OK [installed binary and cached in 0.93s]\n- Installing fastmap ...                        OK [installed binary and cached in 0.67s]\n- Installing cachem ...                         OK [installed binary and cached in 0.62s]\n- Installing memoise ...                        OK [installed binary and cached in 0.63s]\n- Installing conflicted ...                     OK [installed binary and cached in 0.52s]\n- Installing bl",
        "ob ...                           OK [installed binary and cached in 0.6s]\n- Installing DBI ...                            OK [installed binary and cached in 1.0s]\n- Installing dbplyr ...                         OK [installed binary and cached in 0.9s]\n- Installing data.table ...                     OK [installed binary and cached in 2.2s]\n- Installing dtplyr ...                         OK [installed binary and cached in 0.65s]\n- Installing forcats ...                        OK [installed binary and cached i",
        "n 0.81s]\n- Installing gtable ...                         OK [installed binary and cached in 0.82s]\n- Installing isoband ...                        OK [installed binary and cached in 0.89s]\n- Installing S7 ...                             OK [installed binary and cached in 1.0s]\n- Installing farver ...                         OK [installed binary and cached in 0.7s]\n- Installing labeling ...                       OK [installed binary and cached in 0.57s]\n- Installing RColorBrewer ...                   OK [ins",
        "talled binary and cached in 0.53s]\n- Installing viridisLite ...                    OK [installed binary and cached in 0.69s]\n- Installing scales ...                         OK [installed binary and cached in 0.73s]\n- Installing ggplot2 ...                        OK [installed binary and cached in 1.2s]\n- Installing fs ...                             OK [installed binary and cached in 0.7s]\n- Installing curl ...                           OK [installed binary and cached in 1.0s]\n- Installing jsonlite ...     ",
        "                  OK [installed binary and cached in 1.1s]\n- Installing mime ...                           OK [installed binary and cached in 0.62s]\n- Installing sys ...                            OK [installed binary and cached in 0.7s]\n- Installing askpass ...                        OK [installed binary and cached in 0.68s]\n- Installing openssl ...                        OK [installed binary and cached in 1.1s]\n- Installing httr ...                           OK [installed binary and cached in 0.75s]\n- Ins",
        "talling rappdirs ...                       OK [installed binary and cached in 0.65s]\n- Installing gargle ...                         OK [installed binary and cached in 1.4s]\n- Installing uuid ...                           OK [installed binary and cached in 0.61s]\n- Installing googledrive ...                    OK [installed binary and cached in 0.94s]\n- Installing rematch ...                        OK [installed binary and cached in 0.63s]\n- Installing cellranger ...                     OK [installed binary",
        " and cached in 0.6s]\n- Installing ids ...                            OK [installed binary and cached in 0.6s]\n- Installing rematch2 ...                       OK [installed binary and cached in 0.62s]\n- Installing googlesheets4 ...                  OK [installed binary and cached in 0.69s]\n- Installing hms ...                            OK [installed binary and cached in 0.67s]\n- Installing clipr ...                          OK [installed binary and cached in 0.65s]\n- Installing crayon ...                   ",
        "      OK [installed binary and cached in 0.63s]\n- Installing bit ...                            OK [installed binary and cached in 0.86s]\n- Installing bit64 ...                          OK [installed binary and cached in 0.62s]\n- Installing tzdb ...                           OK [installed binary and cached in 1.1s]\n- Installing prettyunits ...                    OK [installed binary and cached in 0.63s]\n- Installing progress ...                       OK [installed binary and cached in 0.65s]\n- Installing vr",
        "oom ...                          OK [installed binary and cached in 1.8s]\n- Installing readr ...                          OK [installed binary and cached in 1.0s]\n- Installing haven ...                          OK [installed binary and cached in 0.81s]\n- Installing timechange ...                     OK [installed binary and cached in 0.65s]\n- Installing lubridate ...                      OK [installed binary and cached in 0.9s]\n- Installing modelr ...                         OK [installed binary and cached ",
        "in 0.6s]\n- Installing base64enc ...                      OK [installed binary and cached in 0.64s]\n- Installing systemfonts ...                    OK [installed binary and cached in 1.0s]\n- Installing textshaping ...                    OK [installed binary and cached in 1.0s]\n- Installing ragg ...                           OK [installed binary and cached in 0.8s]\n- Installing readxl ...                         OK [installed binary and cached in 0.87s]\n- Installing ps ...                             OK [inst",
        "alled binary and cached in 0.7s]\n- Installing processx ...                       OK [installed binary and cached in 0.85s]\n- Installing callr ...                          OK [installed binary and cached in 1.2s]\n- Installing evaluate ...                       OK [installed binary and cached in 0.55s]\n- Installing xfun ...                           OK [installed binary and cached in 0.76s]\n- Installing highr ...                          OK [installed binary and cached in 0.68s]\n- Installing yaml ...         ",
        "                  OK [installed binary and cached in 0.65s]\n- Installing knitr ...                          OK [installed binary and cached in 2.3s]\n- Installing digest ...                         OK [installed binary and cached in 0.86s]\n- Installing htmltools ...                      OK [installed binary and cached in 0.7s]\n- Installing jquerylib ...                      OK [installed binary and cached in 0.96s]\n- Installing sass ...                           OK [installed binary and cached in 1.2s]\n- Ins",
        "talling bslib ...                          OK [installed binary and cached in 13s]\n- Installing fontawesome ...                    OK [installed binary and cached in 0.78s]\n- Installing tinytex ...                        OK [installed binary and cached in 0.66s]\n- Installing rmarkdown ...                      OK [installed binary and cached in 3.6s]\n- Installing reprex ...                         OK [installed binary and cached in 0.96s]\n- Installing selectr ...                        OK [installed binary a",
        "nd cached in 0.63s]\n- Installing xml2 ...                           OK [installed binary and cached in 0.9s]\n- Installing rvest ...                          OK [installed binary and cached in 0.85s]\n- Installing tidyverse ...                      OK [installed binary and cached in 0.75s]\n- Installing brio ...                           OK [installed binary and cached in 0.59s]\n- Installing desc ...                           OK [installed binary and cached in 0.67s]\n- Installing fansi ...                     ",
        "     OK [installed binary and cached in 0.7s]\n- Installing downlit ...                        OK [installed binary and cached in 0.62s]\n- Installing sessioninfo ...                    OK [installed binary and cached in 0.64s]\n- Installing RcppParallel ...                   OK [installed binary and cached in 2.3s]\n- Installing Rcpp ...                           OK [installed binary and cached in 7.6s]\n- Installing RcppEigen ...                      OK [installed binary and cached in 7.9s]\n- Installing StanHe",
        "aders ...                    OK [installed binary and cached in 25s]\n- Installing inline ...                         OK [installed binary and cached in 0.64s]\n- Installing gridExtra ...                      OK [installed binary and cached in 0.93s]\n- Installing checkmate ...                      OK [installed binary and cached in 0.82s]\n- Installing matrixStats ...                    OK [installed binary and cached in 3.0s]\n- Installing abind ...                          OK [installed binary and cached in 0",
        ".48s]\n- Installing tensorA ...                        OK [installed binary and cached in 0.61s]\n- Installing numDeriv ...                       OK [installed binary and cached in 0.6s]\n- Installing distributional ...                 OK [installed binary and cached in 0.7s]\n- Installing posterior ...                      OK [installed binary and cached in 0.89s]\n- Installing loo ...                            OK [installed binary and cached in 1.6s]\n- Installing pkgbuild ...                       OK [install",
        "ed binary and cached in 1.3s]\n- Installing QuickJSR ...                       OK [installed binary and cached in 0.78s]\n- Installing BH ...                             OK [installed binary and cached in 2.7m]\n- Installing plyr ...                           OK [installed binary and cached in 0.7s]\n- Installing reshape2 ...                       OK [installed binary and cached in 0.7s]\n- Installing mvtnorm ...                        OK [installed binary and cached in 0.85s]\n- Installing Brobdingnag ...       ",
        "             OK [installed binary and cached in 0.79s]\n- Installing coda ...                           OK [installed binary and cached in 0.73s]\n- Installing bridgesampling ...                 OK [installed binary and cached in 1.1s]\n- Installing globals ...                        OK [installed binary and cached in 0.85s]\n- Installing listenv ...                        OK [installed binary and cached in 0.63s]\n- Installing parallelly ...                     OK [installed binary and cached in 1.6s]\n- Install",
        "ing future ...                         OK [installed binary and cached in 2.1s]\n- Installing future.apply ...                   OK [installed binary and cached in 1.0s]\n- Installing nleqslv ...                        OK [installed binary and cached in 0.8s]\n- Installing brms ...                           OK [installed binary and cached in 2.3s]\nSuccessfully installed 135 packages in 5.9 minutes.\n",
        "> ",
        "install.packages(\"palmerpenguins\")",
        "# Downloading packages -----------------------------\n- Downloading palmerpenguins from CRAN ...      OK [2.9 Mb in 2.1s]\nSuccessfully downloaded 1 package in 2.4 seconds.\n\nThe following package(s) will be installed:\n- palmerpenguins [0.1.1]\nThese packages will be installed into \"~/ACM/renv/library/R-4.3/x86_64-w64-mingw32\".\n\n",
        "Do you want to proceed? [Y/n]: ",
        "y",
        "\n# Installing packages ------------------------------\n- Installing palmerpenguins ...                 OK [installed binary and cached in 0.74s]\nSuccessfully installed 1 package in 0.94 seconds.\n",
        "> ",
        "install.packages(\"quarto\")",
        "# Downloading packages -----------------------------\n- Downloading quarto from CRAN ...              OK [540 Kb in 1.9s]\nSuccessfully downloaded 1 package in 3.2 seconds.\n\nThe following package(s) will be installed:\n- quarto [1.5.1]\nThese packages will be installed into \"~/ACM/renv/library/R-4.3/x86_64-w64-mingw32\".\n\n",
        "Do you want to proceed? [Y/n]: ",
        "y",
        "\n# Installing packages ------------------------------\n- Installing quarto ...                         OK [installed binary and cached in 0.99s]\nSuccessfully installed 1 package in 1.2 seconds.\n",
        "> ",
        "colourpicker:::plotHelperAddin()",
        "\u001BG1;Fejl i loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : \n  der er ingen pakke med navn ‘htmlwidgets’\n\u001Bg",
        "> ",
        "install.packages(\"htmlwidgets\")",
        "# Downloading packages -----------------------------\n- Downloading htmlwidgets from CRAN ...         OK [793.9 Kb in 1.1s]\nSuccessfully downloaded 1 package in 2.8 seconds.\n\nThe following package(s) will be installed:\n- htmlwidgets [1.6.4]\nThese packages will be installed into \"~/ACM/renv/library/R-4.3/x86_64-w64-mingw32\".\n\n",
        "Do you want to proceed? [Y/n]: ",
        "y",
        "\n# Installing packages ------------------------------\n- Installing htmlwidgets ...                    OK [installed binary and cached in 0.89s]\nSuccessfully installed 1 package in 1.2 seconds.\n",
        "> ",
        "colourpicker:::colourPickerAddin()",
        "\u001BG3;Indlæser krævet pakke: shiny\n\u001Bg\u001BG3;\nListening on http://127.0.0.1:7822\n\u001Bg\n",
        "> ",
        "colourpicker:::plotHelperAddin()",
        "\u001BG3;\nListening on http://127.0.0.1:7822\n\u001Bg",
        "NULL\n\u001BG3;Restarting R session...\u001Bg",
        "Installing packages into ‘C:/Users/ramon/OneDrive - Aarhus universitet/Dokumenter/ACM/renv/library/R-4.3/x86_64-w64-mingw32’\n(as ‘lib’ is unspecified)\nalso installing the dependencies ‘proxy’, ‘e1071’, ‘wk’, ‘sp’, ‘terra’, ‘classInt’, ‘s2’, ‘units’, ‘assertthat’, ‘leaflet.providers’, ‘png’, ‘raster’, ‘sf’, ‘visNetwork’, ‘data.tree’\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/proxy_0.4-29.zip'\nContent typ",
        "e 'binary/octet-stream' length 174560 bytes (170 KB)\ndownloaded 170 KB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/e1071_1.7-17.zip'\nContent type 'binary/octet-stream' length 654875 bytes (639 KB)\ndownloaded 639 KB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/wk_0.9.5.zip'\nContent type 'binary/octet-stream' length 2049921 bytes (2.0 MB)\ndownloaded 2.0 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/s",
        "p_2.2-0.zip'\nContent type 'binary/octet-stream' length 5296198 bytes (5.1 MB)\ndownloaded 5.1 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/terra_1.8-93.zip'\nContent type 'binary/octet-stream' length 40115139 bytes (38.3 MB)\ndownloaded 38.3 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/classInt_0.4-11.zip'\nContent type 'binary/octet-stream' length 502158 bytes (490 KB)\ndownloaded 490 KB\n\ntrying URL 'https://packagemanager.posit.co/cr",
        "an/latest/bin/windows/contrib/4.3/s2_1.1.9.zip'\nContent type 'binary/octet-stream' length 4173363 bytes (4.0 MB)\ndownloaded 4.0 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/units_1.0-0.zip'\nContent type 'binary/octet-stream' length 913521 bytes (892 KB)\ndownloaded 892 KB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/assertthat_0.2.1.zip'\nContent type 'binary/octet-stream' length 55568 bytes (54 KB)\ndownloaded 54 KB\n\ntrying URL 'https:",
        "//packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/leaflet.providers_2.0.0.zip'\nContent type 'binary/octet-stream' length 44795 bytes (43 KB)\ndownloaded 43 KB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/png_0.1-8.zip'\nContent type 'binary/octet-stream' length 192177 bytes (187 KB)\ndownloaded 187 KB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/raster_3.6-32.zip'\nContent type 'binary/octet-stream' length 3697966 bytes (3.5 MB)",
        "\ndownloaded 3.5 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/sf_1.0-24.zip'\nContent type 'binary/octet-stream' length 45058978 bytes (43.0 MB)\ndownloaded 43.0 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/visNetwork_2.1.4.zip'\nContent type 'binary/octet-stream' length 4707044 bytes (4.5 MB)\ndownloaded 4.5 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/data.tree_1.2.0.zip'\nContent type 'binary/oc",
        "tet-stream' length 1494383 bytes (1.4 MB)\ndownloaded 1.4 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/rgl_1.3.34.zip'\nContent type 'binary/octet-stream' length 6132486 bytes (5.8 MB)\ndownloaded 5.8 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/ggvis_0.4.10.zip'\nContent type 'binary/octet-stream' length 1158052 bytes (1.1 MB)\ndownloaded 1.1 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/ggplot2_4",
        ".0.2.zip'\nContent type 'binary/octet-stream' length 8380064 bytes (8.0 MB)\ndownloaded 8.0 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/leaflet_2.2.3.zip'\nContent type 'binary/octet-stream' length 2329883 bytes (2.2 MB)\ndownloaded 2.2 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/dygraphs_1.1.1.6.zip'\nContent type 'binary/octet-stream' length 444390 bytes (433 KB)\ndownloaded 433 KB\n\ntrying URL 'https://packagemanager.posit.co/cran/l",
        "atest/bin/windows/contrib/4.3/DT_0.34.0.zip'\nContent type 'binary/octet-stream' length 2006904 bytes (1.9 MB)\ndownloaded 1.9 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/DiagrammeR_1.0.11.zip'\nContent type 'binary/octet-stream' length 2239982 bytes (2.1 MB)\ndownloaded 2.1 MB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/networkD3_0.4.1.zip'\nContent type 'binary/octet-stream' length 240681 bytes (235 KB)\ndownloaded 235 KB\n\ntrying URL '",
        "https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/threejs_0.3.4.zip'\nContent type 'binary/octet-stream' length 817153 bytes (798 KB)\ndownloaded 798 KB\n\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/googleVis_0.7.3.zip'\nContent type 'binary/octet-stream' length 499801 bytes (488 KB)\ndownloaded 488 KB\n\n",
        "package ‘proxy’ successfully unpacked and MD5 sums checked\npackage ‘e1071’ successfully unpacked and MD5 sums checked\npackage ‘wk’ successfully unpacked and MD5 sums checked\npackage ‘sp’ successfully unpacked and MD5 sums checked\npackage ‘terra’ successfully unpacked and MD5 sums checked\npackage ‘classInt’ successfully unpacked and MD5 sums checked\npackage ‘s2’ successfully unpacked and MD5 sums checked\npackage ‘units’ successfully unpacked and MD5 sums checked\npackage ‘ass",
        "ertthat’ successfully unpacked and MD5 sums checked\npackage ‘leaflet.providers’ successfully unpacked and MD5 sums checked\npackage ‘png’ successfully unpacked and MD5 sums checked\npackage ‘raster’ successfully unpacked and MD5 sums checked\npackage ‘sf’ successfully unpacked and MD5 sums checked\npackage ‘visNetwork’ successfully unpacked and MD5 sums checked\npackage ‘data.tree’ successfully unpacked and MD5 sums checked\npackage ‘rgl’ successfully unpacked and MD5 sums checked\npa",
        "ckage ‘ggvis’ successfully unpacked and MD5 sums checked\npackage ‘ggplot2’ successfully unpacked and MD5 sums checked\npackage ‘leaflet’ successfully unpacked and MD5 sums checked\npackage ‘dygraphs’ successfully unpacked and MD5 sums checked\npackage ‘DT’ successfully unpacked and MD5 sums checked\npackage ‘DiagrammeR’ successfully unpacked and MD5 sums checked\npackage ‘networkD3’ successfully unpacked and MD5 sums checked\npackage ‘threejs’ successfully unpacked and MD5 sums che",
        "cked\npackage ‘googleVis’ successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n\tC:\\Users\\ramon\\AppData\\Local\\Temp\\RtmpQf9gYb\\downloaded_packages\n",
        "> ",
        "install.packages(\"shiny\")",
        "\u001BG3;Installing package into ‘C:/Users/ramon/OneDrive - Aarhus universitet/Dokumenter/ACM/renv/library/R-4.3/x86_64-w64-mingw32’\n(as ‘lib’ is unspecified)\n\u001Bgtrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/shiny_1.12.1.zip'\nContent type 'binary/octet-stream' length 4536188 bytes (4.3 MB)\ndownloaded 4.3 MB\n\n",
        "package ‘shiny’ successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n\tC:\\Users\\ramon\\AppData\\Local\\Temp\\RtmpQf9gYb\\downloaded_packages\n",
        "> ",
        "knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)",
        "> ",
        "set.seed(42)",
        "> ",
        "library(dplyr)",
        "> ",
        "library(purrr)",
        "> ",
        "library(ggplot2)",
        "> ",
        "library(readr)",
        "> ",
        "> ",
        "dir.create(\"outputs/figures\", recursive = TRUE, showWarnings = FALSE)",
        "> ",
        "clip_prob <- function(p, eps = 1e-6) pmax(pmin(p, 1 - eps), eps)",
        "> ",
        "sigmoid <- function(x) 1 / (1 + exp(-x))",
        "> ",
        "> ",
        "normalize_log_weights <- function(logw) {",
        "+ ",
        "  m <- max(logw)",
        "+ ",
        "  w <- exp(logw - m)",
        "+ ",
        "  w / sum(w)",
        "+ ",
        "}",
        "> ",
        "opp_model_random_beta <- function(a0 = 1, b0 = 1, rho = 0.98) {",
        "+ ",
        "  # Leaky Beta-Bernoulli counts for P(opp=1)",
        "+ ",
        "  state <- list(a = a0, b = b0, a0 = a0, b0 = b0, rho = rho)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = \"OppRandomBeta\",",
        "+ ",
        "    init = function() { state$a <- state$a0; state$b <- state$b0; invisible(state) },",
        "+ ",
        "    predict_p1 = function(role_self, role_opp) clip_prob(state$a / (state$a + state$b)),",
        "+ ",
        "    learn = function(opp_action, own_action, role_self, role_opp, payoff_opp) {",
        "+ ",
        "      state$a <- state$a0 + state$rho * (state$a - state$a0) + opp_action",
        "+ ",
        "      state$b <- state$b0 + state$rho * (state$b - state$b0) + (1 - opp_action)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "opp_model_wsls <- function(lapse = 0.10) {",
        "+ ",
        "  # Opponent-as-WSLS with lapse",
        "+ ",
        "  state <- list(prev_a = NA_integer_, prev_win = NA_integer_, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = \"OppWSLS\",",
        "+ ",
        "    init = function() { state$prev_a <- NA_integer_; state$prev_win <- NA_integer_; invisible(state) },",
        "+ ",
        "    predict_p1 = function(role_self, role_opp) {",
        "+ ",
        "      if (is.na(state$prev_a)) return(0.5)",
        "+ ",
        "      target <- if (state$prev_win == 1L) state$prev_a else (1L - state$prev_a)",
        "+ ",
        "      p <- (1 - state$lapse) * as.numeric(target == 1L) + state$lapse * 0.5",
        "+ ",
        "      clip_prob(p)",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(opp_action, own_action, role_self, role_opp, payoff_opp) {",
        "+ ",
        "      state$prev_a <- opp_action",
        "+ ",
        "      state$prev_win <- as.integer(payoff_opp == 1L)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "opp_model_memory <- function(alpha = 0.15, tau = 8, lapse = 0.05) {",
        "+ ",
        "  # Opponent tracks OUR action bias with leaky integration, then best-responds",
        "+ ",
        "  state <- list(m = 0.5, alpha = alpha, tau = tau, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = \"OppMemory\",",
        "+ ",
        "    init = function() { state$m <- 0.5; invisible(state) },",
        "+ ",
        "    predict_p1 = function(role_self, role_opp) {",
        "+ ",
        "      x <- if (role_opp == \"matcher\") (state$m - 0.5) else (0.5 - state$m)",
        "+ ",
        "      p1 <- (1 - state$lapse) * sigmoid(state$tau * x) + state$lapse * 0.5",
        "+ ",
        "      clip_prob(p1)",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(opp_action, own_action, role_self, role_opp, payoff_opp) {",
        "+ ",
        "      state$m <- state$m + state$alpha * (own_action - state$m)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "new_wsls_agent <- function(lapse = 0.05) {",
        "+ ",
        "  state <- list(prev_a = NA_integer_, prev_win = NA_integer_, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = sprintf(\"WSLS(lapse=%.2f)\", lapse),",
        "+ ",
        "    init = function() { state$prev_a <- NA_integer_; state$prev_win <- NA_integer_; invisible(state) },",
        "+ ",
        "    act = function(role_self, role_opp) {",
        "+ ",
        "      if (is.na(state$prev_a)) return(sample(c(0L, 1L), 1))",
        "+ ",
        "      if (runif(1) < state$lapse) return(sample(c(0L, 1L), 1))",
        "+ ",
        "      if (state$prev_win == 1L) state$prev_a else (1L - state$prev_a)",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(own_action, opp_action, payoff, role_self, role_opp) {",
        "+ ",
        "      state$prev_a <- own_action",
        "+ ",
        "      state$prev_win <- as.integer(payoff == 1L)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "new_memory_agent <- function(alpha = 0.15, tau = 8, lapse = 0.05) {",
        "+ ",
        "  # Tracks opponent bias: m <- m + alpha*(opp - m)",
        "+ ",
        "  state <- list(m = 0.5, alpha = alpha, tau = tau, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = sprintf(\"Memory(alpha=%.2f,tau=%.1f,lapse=%.2f)\", alpha, tau, lapse),",
        "+ ",
        "    init = function() { state$m <- 0.5; invisible(state) },",
        "+ ",
        "    act = function(role_self, role_opp) {",
        "+ ",
        "      if (runif(1) < state$lapse) return(sample(c(0L, 1L), 1))",
        "+ ",
        "      x <- if (role_self == \"matcher\") (state$m - 0.5) else (0.5 - state$m)",
        "+ ",
        "      rbinom(1, 1, clip_prob(sigmoid(state$tau * x)))",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(own_action, opp_action, payoff, role_self, role_opp) {",
        "+ ",
        "      state$m <- state$m + state$alpha * (opp_action - state$m)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "new_mixture_inference_agent <- function(",
        "+ ",
        "  models = NULL,",
        "+ ",
        "  lambda_logw = 0.98,",
        "+ ",
        "  tau = 10,",
        "+ ",
        "  lapse = 0.03",
        "+ ",
        ") {",
        "+ ",
        "  # Online model averaging over opponent models (ambitious strategy)",
        "+ ",
        "  if (is.null(models)) {",
        "+ ",
        "    models <- list(",
        "+ ",
        "      opp_model_random_beta(a0 = 1, b0 = 1, rho = 0.98),",
        "+ ",
        "      opp_model_wsls(lapse = 0.10),",
        "+ ",
        "      opp_model_memory(alpha = 0.15, tau = 8, lapse = 0.05)",
        "+ ",
        "    )",
        "+ ",
        "  }",
        "+ ",
        "+ ",
        "  state <- list(logw = rep(0, length(models)), lambda_logw = lambda_logw, tau = tau, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = \"MixtureInference\",",
        "+ ",
        "    init = function() { state$logw <- rep(0, length(models)); for (m in models) m$init(); invisible(state) },",
        "+ ",
        "    act = function(role_self, role_opp) {",
        "+ ",
        "      if (runif(1) < state$lapse) return(sample(c(0L, 1L), 1))",
        "+ ",
        "      p_each <- vapply(models, function(m) m$predict_p1(role_self, role_opp), numeric(1))",
        "+ ",
        "      w <- normalize_log_weights(state$logw)",
        "+ ",
        "      p_mix <- clip_prob(sum(w * p_each))",
        "+ ",
        "      x <- if (role_self == \"matcher\") (p_mix - 0.5) else (0.5 - p_mix)",
        "+ ",
        "      rbinom(1, 1, clip_prob(sigmoid(state$tau * x)))",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(own_action, opp_action, payoff, role_self, role_opp) {",
        "+ ",
        "      payoff_opp <- -payoff",
        "+ ",
        "      p_each <- vapply(models, function(m) m$predict_p1(role_self, role_opp), numeric(1))",
        "+ ",
        "      p_each <- clip_prob(p_each)",
        "+ ",
        "      loglik <- if (opp_action == 1L) log(p_each) else log(1 - p_each)",
        "+ ",
        "      state$logw <- state$lambda_logw * state$logw + loglik",
        "+ ",
        "      for (m in models) m$learn(opp_action, own_action, role_self, role_opp, payoff_opp)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "new_random_agent <- function(theta = 0.5) {",
        "+ ",
        "  list(",
        "+ ",
        "    name = sprintf(\"Random(theta=%.2f)\", theta),",
        "+ ",
        "    init = function() invisible(NULL),",
        "+ ",
        "    act = function(role_self, role_opp) rbinom(1, 1, theta),",
        "+ ",
        "    learn = function(own_action, opp_action, payoff, role_self, role_opp) invisible(NULL)",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "simulate_match <- function(agent_A, agent_B, n_trials = 60, swap_at = 30) {",
        "+ ",
        "  stopifnot(swap_at >= 1, swap_at <= n_trials)",
        "+ ",
        "+ ",
        "  agent_A$init()",
        "+ ",
        "  agent_B$init()",
        "+ ",
        "+ ",
        "  role_A <- c(rep(\"matcher\", swap_at), rep(\"hider\", n_trials - swap_at))",
        "+ ",
        "  role_B <- ifelse(role_A == \"matcher\", \"hider\", \"matcher\")",
        "+ ",
        "+ ",
        "  out <- vector(\"list\", n_trials)",
        "+ ",
        "+ ",
        "  for (t in seq_len(n_trials)) {",
        "+ ",
        "    a <- agent_A$act(role_self = role_A[t], role_opp = role_B[t])",
        "+ ",
        "    b <- agent_B$act(role_self = role_B[t], role_opp = role_A[t])",
        "+ ",
        "+ ",
        "    payoff_A <- if (role_A[t] == \"matcher\") {",
        "+ ",
        "      if (a == b) 1L else -1L",
        "+ ",
        "    } else {",
        "+ ",
        "      if (a != b) 1L else -1L",
        "+ ",
        "    }",
        "+ ",
        "    payoff_B <- -payoff_A",
        "+ ",
        "+ ",
        "    agent_A$learn(own_action = a, opp_action = b, payoff = payoff_A, role_self = role_A[t], role_opp = role_B[t])",
        "+ ",
        "    agent_B$learn(own_action = b, opp_action = a, payoff = payoff_B, role_self = role_B[t], role_opp = role_A[t])",
        "+ ",
        "+ ",
        "    out[[t]] <- data.frame(",
        "+ ",
        "      trial = t,",
        "+ ",
        "      role_A = role_A[t],",
        "+ ",
        "      role_B = role_B[t],",
        "+ ",
        "      action_A = a,",
        "+ ",
        "      action_B = b,",
        "+ ",
        "      payoff_A = payoff_A,",
        "+ ",
        "      payoff_B = payoff_B",
        "+ ",
        "    )",
        "+ ",
        "  }",
        "+ ",
        "+ ",
        "  bind_rows(out)",
        "+ ",
        "}",
        "> ",
        "make_ordered_pairs <- function(names) {",
        "+ ",
        "  expand.grid(A = names, B = names, stringsAsFactors = FALSE) |>",
        "+ ",
        "    filter(A != B) |>",
        "+ ",
        "    split(seq_len(nrow(.))) |>",
        "+ ",
        "    lapply(\\(r) list(A = r$A, B = r$B))",
        "+ ",
        "}",
        "> ",
        "> ",
        "run_tournament <- function(agent_factories, n_sims = 300, n_trials = 60, swap_at = 30, seed = 1) {",
        "+ ",
        "  set.seed(seed)",
        "+ ",
        "  strategies <- names(agent_factories)",
        "+ ",
        "  pairs <- make_ordered_pairs(strategies)",
        "+ ",
        "+ ",
        "  map_dfr(pairs, function(pair) {",
        "+ ",
        "    Aname <- pair$A",
        "+ ",
        "    Bname <- pair$B",
        "+ ",
        "    pair_label <- paste0(Aname, \" vs \", Bname)",
        "+ ",
        "+ ",
        "    map_dfr(seq_len(n_sims), function(sim_id) {",
        "+ ",
        "      A <- agent_factories[[Aname]]()",
        "+ ",
        "      B <- agent_factories[[Bname]]()",
        "+ ",
        "      d <- simulate_match(A, B, n_trials = n_trials, swap_at = swap_at)",
        "+ ",
        "      d$sim <- sim_id",
        "+ ",
        "      d$pair <- pair_label",
        "+ ",
        "      d$strategy_A <- Aname",
        "+ ",
        "      d$strategy_B <- Bname",
        "+ ",
        "      d",
        "+ ",
        "    })",
        "+ ",
        "  })",
        "+ ",
        "}",
        "> ",
        "> ",
        "agent_factories <- list(",
        "+ ",
        "  WSLS   = function() new_wsls_agent(lapse = 0.05),",
        "+ ",
        "  Memory = function() new_memory_agent(alpha = 0.15, tau = 8, lapse = 0.05),",
        "+ ",
        "  Mixture= function() new_mixture_inference_agent(lambda_logw = 0.98, tau = 10, lapse = 0.03),",
        "+ ",
        "  Random = function() new_random_agent(theta = 0.50)",
        "+ ",
        ")",
        "> ",
        "> ",
        "df <- run_tournament(agent_factories, n_sims = 300, n_trials = 60, swap_at = 30, seed = 42)",
        "\u001BG1;Fejl i make_ordered_pairs(strategies) : objekt '.' blev ikke fundet\n\u001Bg",
        "> ",
        "knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)",
        "> ",
        "set.seed(123)",
        "> ",
        "library(readr)",
        "> ",
        "library(dplyr)",
        "> ",
        "> ",
        "# Optional (only needed for this file)",
        "> ",
        "library(cmdstanr)",
        "\u001BG1;Fejl i library(cmdstanr) : der er ingen pakke med navn ‘cmdstanr’\n\u001Bg",
        "> ",
        "knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)",
        "> ",
        "set.seed(42)",
        "> ",
        "library(dplyr)",
        "> ",
        "library(purrr)",
        "> ",
        "library(ggplot2)",
        "> ",
        "library(readr)",
        "> ",
        "> ",
        "dir.create(\"outputs/figures\", recursive = TRUE, showWarnings = FALSE)",
        "> ",
        "clip_prob <- function(p, eps = 1e-6) pmax(pmin(p, 1 - eps), eps)",
        "> ",
        "sigmoid <- function(x) 1 / (1 + exp(-x))",
        "> ",
        "> ",
        "normalize_log_weights <- function(logw) {",
        "+ ",
        "  m <- max(logw)",
        "+ ",
        "  w <- exp(logw - m)",
        "+ ",
        "  w / sum(w)",
        "+ ",
        "}",
        "> ",
        "opp_model_random_beta <- function(a0 = 1, b0 = 1, rho = 0.98) {",
        "+ ",
        "  # Leaky Beta-Bernoulli counts for P(opp=1)",
        "+ ",
        "  state <- list(a = a0, b = b0, a0 = a0, b0 = b0, rho = rho)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = \"OppRandomBeta\",",
        "+ ",
        "    init = function() { state$a <- state$a0; state$b <- state$b0; invisible(state) },",
        "+ ",
        "    predict_p1 = function(role_self, role_opp) clip_prob(state$a / (state$a + state$b)),",
        "+ ",
        "    learn = function(opp_action, own_action, role_self, role_opp, payoff_opp) {",
        "+ ",
        "      state$a <- state$a0 + state$rho * (state$a - state$a0) + opp_action",
        "+ ",
        "      state$b <- state$b0 + state$rho * (state$b - state$b0) + (1 - opp_action)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "opp_model_wsls <- function(lapse = 0.10) {",
        "+ ",
        "  # Opponent-as-WSLS with lapse",
        "+ ",
        "  state <- list(prev_a = NA_integer_, prev_win = NA_integer_, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = \"OppWSLS\",",
        "+ ",
        "    init = function() { state$prev_a <- NA_integer_; state$prev_win <- NA_integer_; invisible(state) },",
        "+ ",
        "    predict_p1 = function(role_self, role_opp) {",
        "+ ",
        "      if (is.na(state$prev_a)) return(0.5)",
        "+ ",
        "      target <- if (state$prev_win == 1L) state$prev_a else (1L - state$prev_a)",
        "+ ",
        "      p <- (1 - state$lapse) * as.numeric(target == 1L) + state$lapse * 0.5",
        "+ ",
        "      clip_prob(p)",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(opp_action, own_action, role_self, role_opp, payoff_opp) {",
        "+ ",
        "      state$prev_a <- opp_action",
        "+ ",
        "      state$prev_win <- as.integer(payoff_opp == 1L)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "opp_model_memory <- function(alpha = 0.15, tau = 8, lapse = 0.05) {",
        "+ ",
        "  # Opponent tracks OUR action bias with leaky integration, then best-responds",
        "+ ",
        "  state <- list(m = 0.5, alpha = alpha, tau = tau, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = \"OppMemory\",",
        "+ ",
        "    init = function() { state$m <- 0.5; invisible(state) },",
        "+ ",
        "    predict_p1 = function(role_self, role_opp) {",
        "+ ",
        "      x <- if (role_opp == \"matcher\") (state$m - 0.5) else (0.5 - state$m)",
        "+ ",
        "      p1 <- (1 - state$lapse) * sigmoid(state$tau * x) + state$lapse * 0.5",
        "+ ",
        "      clip_prob(p1)",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(opp_action, own_action, role_self, role_opp, payoff_opp) {",
        "+ ",
        "      state$m <- state$m + state$alpha * (own_action - state$m)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "new_wsls_agent <- function(lapse = 0.05) {",
        "+ ",
        "  state <- list(prev_a = NA_integer_, prev_win = NA_integer_, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = sprintf(\"WSLS(lapse=%.2f)\", lapse),",
        "+ ",
        "    init = function() { state$prev_a <- NA_integer_; state$prev_win <- NA_integer_; invisible(state) },",
        "+ ",
        "    act = function(role_self, role_opp) {",
        "+ ",
        "      if (is.na(state$prev_a)) return(sample(c(0L, 1L), 1))",
        "+ ",
        "      if (runif(1) < state$lapse) return(sample(c(0L, 1L), 1))",
        "+ ",
        "      if (state$prev_win == 1L) state$prev_a else (1L - state$prev_a)",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(own_action, opp_action, payoff, role_self, role_opp) {",
        "+ ",
        "      state$prev_a <- own_action",
        "+ ",
        "      state$prev_win <- as.integer(payoff == 1L)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "new_memory_agent <- function(alpha = 0.15, tau = 8, lapse = 0.05) {",
        "+ ",
        "  # Tracks opponent bias: m <- m + alpha*(opp - m)",
        "+ ",
        "  state <- list(m = 0.5, alpha = alpha, tau = tau, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = sprintf(\"Memory(alpha=%.2f,tau=%.1f,lapse=%.2f)\", alpha, tau, lapse),",
        "+ ",
        "    init = function() { state$m <- 0.5; invisible(state) },",
        "+ ",
        "    act = function(role_self, role_opp) {",
        "+ ",
        "      if (runif(1) < state$lapse) return(sample(c(0L, 1L), 1))",
        "+ ",
        "      x <- if (role_self == \"matcher\") (state$m - 0.5) else (0.5 - state$m)",
        "+ ",
        "      rbinom(1, 1, clip_prob(sigmoid(state$tau * x)))",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(own_action, opp_action, payoff, role_self, role_opp) {",
        "+ ",
        "      state$m <- state$m + state$alpha * (opp_action - state$m)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "new_mixture_inference_agent <- function(",
        "+ ",
        "  models = NULL,",
        "+ ",
        "  lambda_logw = 0.98,",
        "+ ",
        "  tau = 10,",
        "+ ",
        "  lapse = 0.03",
        "+ ",
        ") {",
        "+ ",
        "  # Online model averaging over opponent models (ambitious strategy)",
        "+ ",
        "  if (is.null(models)) {",
        "+ ",
        "    models <- list(",
        "+ ",
        "      opp_model_random_beta(a0 = 1, b0 = 1, rho = 0.98),",
        "+ ",
        "      opp_model_wsls(lapse = 0.10),",
        "+ ",
        "      opp_model_memory(alpha = 0.15, tau = 8, lapse = 0.05)",
        "+ ",
        "    )",
        "+ ",
        "  }",
        "+ ",
        "+ ",
        "  state <- list(logw = rep(0, length(models)), lambda_logw = lambda_logw, tau = tau, lapse = lapse)",
        "+ ",
        "+ ",
        "  list(",
        "+ ",
        "    name = \"MixtureInference\",",
        "+ ",
        "    init = function() { state$logw <- rep(0, length(models)); for (m in models) m$init(); invisible(state) },",
        "+ ",
        "    act = function(role_self, role_opp) {",
        "+ ",
        "      if (runif(1) < state$lapse) return(sample(c(0L, 1L), 1))",
        "+ ",
        "      p_each <- vapply(models, function(m) m$predict_p1(role_self, role_opp), numeric(1))",
        "+ ",
        "      w <- normalize_log_weights(state$logw)",
        "+ ",
        "      p_mix <- clip_prob(sum(w * p_each))",
        "+ ",
        "      x <- if (role_self == \"matcher\") (p_mix - 0.5) else (0.5 - p_mix)",
        "+ ",
        "      rbinom(1, 1, clip_prob(sigmoid(state$tau * x)))",
        "+ ",
        "    },",
        "+ ",
        "    learn = function(own_action, opp_action, payoff, role_self, role_opp) {",
        "+ ",
        "      payoff_opp <- -payoff",
        "+ ",
        "      p_each <- vapply(models, function(m) m$predict_p1(role_self, role_opp), numeric(1))",
        "+ ",
        "      p_each <- clip_prob(p_each)",
        "+ ",
        "      loglik <- if (opp_action == 1L) log(p_each) else log(1 - p_each)",
        "+ ",
        "      state$logw <- state$lambda_logw * state$logw + loglik",
        "+ ",
        "      for (m in models) m$learn(opp_action, own_action, role_self, role_opp, payoff_opp)",
        "+ ",
        "      invisible(state)",
        "+ ",
        "    }",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "> ",
        "new_random_agent <- function(theta = 0.5) {",
        "+ ",
        "  list(",
        "+ ",
        "    name = sprintf(\"Random(theta=%.2f)\", theta),",
        "+ ",
        "    init = function() invisible(NULL),",
        "+ ",
        "    act = function(role_self, role_opp) rbinom(1, 1, theta),",
        "+ ",
        "    learn = function(own_action, opp_action, payoff, role_self, role_opp) invisible(NULL)",
        "+ ",
        "  )",
        "+ ",
        "}",
        "> ",
        "simulate_match <- function(agent_A, agent_B, n_trials = 60, swap_at = 30) {",
        "+ ",
        "  stopifnot(swap_at >= 1, swap_at <= n_trials)",
        "+ ",
        "+ ",
        "  agent_A$init()",
        "+ ",
        "  agent_B$init()",
        "+ ",
        "+ ",
        "  role_A <- c(rep(\"matcher\", swap_at), rep(\"hider\", n_trials - swap_at))",
        "+ ",
        "  role_B <- ifelse(role_A == \"matcher\", \"hider\", \"matcher\")",
        "+ ",
        "+ ",
        "  out <- vector(\"list\", n_trials)",
        "+ ",
        "+ ",
        "  for (t in seq_len(n_trials)) {",
        "+ ",
        "    a <- agent_A$act(role_self = role_A[t], role_opp = role_B[t])",
        "+ ",
        "    b <- agent_B$act(role_self = role_B[t], role_opp = role_A[t])",
        "+ ",
        "+ ",
        "    payoff_A <- if (role_A[t] == \"matcher\") {",
        "+ ",
        "      if (a == b) 1L else -1L",
        "+ ",
        "    } else {",
        "+ ",
        "      if (a != b) 1L else -1L",
        "+ ",
        "    }",
        "+ ",
        "    payoff_B <- -payoff_A",
        "+ ",
        "+ ",
        "    agent_A$learn(own_action = a, opp_action = b, payoff = payoff_A, role_self = role_A[t], role_opp = role_B[t])",
        "+ ",
        "    agent_B$learn(own_action = b, opp_action = a, payoff = payoff_B, role_self = role_B[t], role_opp = role_A[t])",
        "+ ",
        "+ ",
        "    out[[t]] <- data.frame(",
        "+ ",
        "      trial = t,",
        "+ ",
        "      role_A = role_A[t],",
        "+ ",
        "      role_B = role_B[t],",
        "+ ",
        "      action_A = a,",
        "+ ",
        "      action_B = b,",
        "+ ",
        "      payoff_A = payoff_A,",
        "+ ",
        "      payoff_B = payoff_B",
        "+ ",
        "    )",
        "+ ",
        "  }",
        "+ ",
        "+ ",
        "  bind_rows(out)",
        "+ ",
        "}",
        "> ",
        "make_ordered_pairs <- function(names) {",
        "+ ",
        "  expand.grid(A = names, B = names, stringsAsFactors = FALSE) |>",
        "+ ",
        "    filter(A != B) |>",
        "+ ",
        "    split(seq_len(nrow(.))) |>",
        "+ ",
        "    lapply(\\(r) list(A = r$A, B = r$B))",
        "+ ",
        "}",
        "> ",
        "> ",
        "run_tournament <- function(agent_factories, n_sims = 300, n_trials = 60, swap_at = 30, seed = 1) {",
        "+ ",
        "  set.seed(seed)",
        "+ ",
        "  strategies <- names(agent_factories)",
        "+ ",
        "  pairs <- make_ordered_pairs(strategies)",
        "+ ",
        "+ ",
        "  map_dfr(pairs, function(pair) {",
        "+ ",
        "    Aname <- pair$A",
        "+ ",
        "    Bname <- pair$B",
        "+ ",
        "    pair_label <- paste0(Aname, \" vs \", Bname)",
        "+ ",
        "+ ",
        "    map_dfr(seq_len(n_sims), function(sim_id) {",
        "+ ",
        "      A <- agent_factories[[Aname]]()",
        "+ ",
        "      B <- agent_factories[[Bname]]()",
        "+ ",
        "      d <- simulate_match(A, B, n_trials = n_trials, swap_at = swap_at)",
        "+ ",
        "      d$sim <- sim_id",
        "+ ",
        "      d$pair <- pair_label",
        "+ ",
        "      d$strategy_A <- Aname",
        "+ ",
        "      d$strategy_B <- Bname",
        "+ ",
        "      d",
        "+ ",
        "    })",
        "+ ",
        "  })",
        "+ ",
        "}",
        "> ",
        "> ",
        "agent_factories <- list(",
        "+ ",
        "  WSLS   = function() new_wsls_agent(lapse = 0.05),",
        "+ ",
        "  Memory = function() new_memory_agent(alpha = 0.15, tau = 8, lapse = 0.05),",
        "+ ",
        "  Mixture= function() new_mixture_inference_agent(lambda_logw = 0.98, tau = 10, lapse = 0.03),",
        "+ ",
        "  Random = function() new_random_agent(theta = 0.50)",
        "+ ",
        ")",
        "> ",
        "> ",
        "df <- run_tournament(agent_factories, n_sims = 300, n_trials = 60, swap_at = 30, seed = 42)",
        "\u001BG1;Fejl i make_ordered_pairs(strategies) : objekt '.' blev ikke fundet\n\u001Bg",
        "> ",
        "install.packages(",
        "+ ",
        "    pkgs = \"rstan\", ",
        "+ ",
        "    repos = c(",
        "+ ",
        "        \"https://mc-stan.org/r-packages/\", ",
        "+ ",
        "        getOption(\"repos\")",
        "+ ",
        "    ))",
        "\u001BG3;Installing package into ‘C:/Users/ramon/OneDrive - Aarhus universitet/Dokumenter/ACM/renv/library/R-4.3/x86_64-w64-mingw32’\n(as ‘lib’ is unspecified)\n\u001Bgtrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/rstan_2.32.7.zip'\nContent type 'binary/octet-stream' length 2560082 bytes (2.4 MB)\ndownloaded 2.4 MB\n\n",
        "package ‘rstan’ successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n\tC:\\Users\\ramon\\AppData\\Local\\Temp\\RtmpQf9gYb\\downloaded_packages\n",
        "> ",
        "rstudioapi::restartSession()",
        "\u001BG3;Restarting R session...\u001Bg",
        "- Project '~/ACM' loaded. [renv 1.0.11]\n",
        "> ",
        "install.packages(\"brms\")",
        "\u001BG3;Installing package into ‘C:/Users/ramon/OneDrive - Aarhus universitet/Dokumenter/ACM/renv/library/R-4.3/x86_64-w64-mingw32’\n(as ‘lib’ is unspecified)\n\u001Bgtrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/brms_2.23.0.zip'\nContent type 'binary/octet-stream' length 7562711 bytes (7.2 MB)\ndownloaded 7.2 MB\n\n",
        "package ‘brms’ successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n\tC:\\Users\\ramon\\AppData\\Local\\Temp\\Rtmp4IarB7\\downloaded_packages\n",
        "> ",
        "> ",
        "remotes::install_github(\"stan-dev/cmdstanr\")",
        "\u001BG3;Using GitHub PAT from the git credential store.\n\u001Bg\u001BG1;Fejl: Failed to install 'unknown package' from GitHub:\n  HTTP error 401.\n  Bad credentials\n\u001Bg",
        "> ",
        "install.packages(\"cmdstanr\")",
        "\u001BG3;Installing package into ‘C:/Users/ramon/OneDrive - Aarhus universitet/Dokumenter/ACM/renv/library/R-4.3/x86_64-w64-mingw32’\n(as ‘lib’ is unspecified)\n\u001Bg",
        "> ",
        "cmdstanr::check_cmdstan_toolchain(fix = TRUE)",
        "\u001BG1;Fejl i loadNamespace(x) : der er ingen pakke med navn ‘cmdstanr’\n\u001Bg",
        "> ",
        "remotes::install_github(\"stan-dev/cmdstanr\")",
        "\u001BG3;Using GitHub PAT from the git credential store.\n\u001Bg\u001BG1;Fejl: Failed to install 'unknown package' from GitHub:\n  HTTP error 401.\n  Bad credentials\n\u001Bg",
        "\u001BG3;Restarting R session...\u001Bg",
        "Installing package into ‘C:/Users/ramon/OneDrive - Aarhus universitet/Dokumenter/ACM/renv/library/R-4.3/x86_64-w64-mingw32’\n(as ‘lib’ is unspecified)\ntrying URL 'https://packagemanager.posit.co/cran/latest/bin/windows/contrib/4.3/remotes_2.5.0.zip'\nContent type 'binary/octet-stream' length 430406 bytes (420 KB)\ndownloaded 420 KB\n\n",
        "package ‘remotes’ successfully unpacked and MD5 sums checked\n\nThe downloaded binary packages are in\n\tC:\\Users\\ramon\\AppData\\Local\\Temp\\RtmpUH3uRG\\downloaded_packages\n",
        "> ",
        "remotes::install_github(\"stan-dev/cmdstanr\")",
        "\u001BG3;Using GitHub PAT from the git credential store.\n\u001Bg\u001BG1;Fejl: Failed to install 'unknown package' from GitHub:\n  HTTP error 401.\n  Bad credentials\n\u001Bg",
        "> ",
        "# we recommend running this in a fresh R session or restarting your current session",
        "> ",
        "install.packages(\"cmdstanr\", repos = c('https://stan-dev.r-universe.dev', getOption(\"repos\")))",
        "\u001BG3;Installing package into ‘C:/Users/ramon/OneDrive - Aarhus universitet/Dokumenter/ACM/renv/library/R-4.3/x86_64-w64-mingw32’\n(as ‘lib’ is unspecified)\n\u001Bg\u001BG3;installing the source package ‘cmdstanr’\n\n\u001Bgtrying URL 'https://stan-dev.r-universe.dev/src/contrib/sha256-c09f6b2cb4636825ef92d1c8fc2433a70eaaaaae66e27bf0b37388a627e1d62d'\nContent type 'application/gzip' length 845164 bytes (825 KB)\ndownloaded 825 KB\n\n",
        "* installing *source* package 'cmdstanr' ...\n** using staged installation\n** R\n** inst\n** byte-compile and prepare package for lazy loading\n** help\n*** installing help indices\n*** copying figures\n** building package indices\n** installing vignettes\n** testing if installed package can be loaded from temporary location\n** testing if installed package can be loaded from final location\n** testing if installed package keeps a record of temporary installation path\n* DONE (cmdstanr)\n",
        "\nThe downloaded source packages are in\n\t‘C:\\Users\\ramon\\AppData\\Local\\Temp\\RtmpUH3uRG\\downloaded_packages’\n",
        "> ",
        "# install.packages(\"remotes\")",
        "> ",
        "remotes::install_github(\"stan-dev/cmdstanr\")",
        "\u001BG3;Using GitHub PAT from the git credential store.\n\u001Bg\u001BG1;Fejl: Failed to install 'cmdstanr' from GitHub:\n  HTTP error 401.\n  Bad credentials\n\u001Bg",
        "> ",
        "cmdstanr::check_cmdstan_toolchain(fix = TRUE)",
        "\u001BG1;Fejl i loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]) : \n  navnerum ‘rlang’ 1.1.4 er indlæst, men >= 1.1.7 er krævet\n\u001Bg",
        "> ",
        "remotes::install_github(\"stan-dev/cmdstanr\")",
        "\u001BG3;Using GitHub PAT from the git credential store.\n\u001Bg\u001BG1;Fejl: Failed to install 'cmdstanr' from GitHub:\n  HTTP error 401.\n  Bad credentials\n\u001Bg",
        "> ",
        "remotes::install_github(\"stan-dev/cmdstanr\")",
        "\u001BG3;Using GitHub PAT from the git credential store.\n\u001Bg\u001BG1;Fejl: Failed to install 'cmdstanr' from GitHub:\n  HTTP error 401.\n  Bad credentials\n\u001Bg",
        "> ",
        "install_cmdstan()",
        "\u001BG1;Fejl i install_cmdstan() : could not find function \"install_cmdstan\"\n\u001Bg",
        "> ",
        "knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)",
        "> ",
        "set.seed(42)",
        "> ",
        "library(dplyr)",
        "\u001BG1;Fejl: package or namespace load failed for ‘dplyr’ in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]):\n navnerum ‘rlang’ 1.1.4 er indlæst, men >= 1.1.7 er krævet\n\u001Bg",
        "> ",
        "library(dplyr)",
        "\u001BG1;Fejl: package or namespace load failed for ‘dplyr’ in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]):\n navnerum ‘rlang’ 1.1.4 er indlæst, men >= 1.1.7 er krævet\n\u001Bg",
        "\u001BG3;Restarting R session...\u001Bg"
    ]
}