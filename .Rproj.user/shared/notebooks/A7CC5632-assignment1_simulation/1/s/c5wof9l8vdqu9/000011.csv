"0","make_ordered_pairs <- function(names) {"
"0","  expand.grid(A = names, B = names, stringsAsFactors = FALSE) |>"
"0","    filter(A != B) |>"
"0","    split(seq_len(nrow(.))) |>"
"0","    lapply(\(r) list(A = r$A, B = r$B))"
"0","}"
"0",""
"0","run_tournament <- function(agent_factories, n_sims = 300, n_trials = 60, swap_at = 30, seed = 1) {"
"0","  set.seed(seed)"
"0","  strategies <- names(agent_factories)"
"0","  pairs <- make_ordered_pairs(strategies)"
"0",""
"0","  map_dfr(pairs, function(pair) {"
"0","    Aname <- pair$A"
"0","    Bname <- pair$B"
"0","    pair_label <- paste0(Aname, "" vs "", Bname)"
"0",""
"0","    map_dfr(seq_len(n_sims), function(sim_id) {"
"0","      A <- agent_factories[[Aname]]()"
"0","      B <- agent_factories[[Bname]]()"
"0","      d <- simulate_match(A, B, n_trials = n_trials, swap_at = swap_at)"
"0","      d$sim <- sim_id"
"0","      d$pair <- pair_label"
"0","      d$strategy_A <- Aname"
"0","      d$strategy_B <- Bname"
"0","      d"
"0","    })"
"0","  })"
"0","}"
"0",""
"0","agent_factories <- list("
"0","  WSLS   = function() new_wsls_agent(lapse = 0.05),"
"0","  Memory = function() new_memory_agent(alpha = 0.15, tau = 8, lapse = 0.05),"
"0","  Mixture= function() new_mixture_inference_agent(lambda_logw = 0.98, tau = 10, lapse = 0.03),"
"0","  Random = function() new_random_agent(theta = 0.50)"
"0",")"
"0",""
"0","df <- run_tournament(agent_factories, n_sims = 300, n_trials = 60, swap_at = 30, seed = 42)"
"2","Fejl i make_ordered_pairs(strategies) : objekt '.' blev ikke fundet
"
